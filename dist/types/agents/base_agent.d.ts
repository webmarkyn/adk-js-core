/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
import { Content } from '@google/genai';
import { Event } from '../events/event.js';
import { CallbackContext } from './callback_context.js';
import { InvocationContext } from './invocation_context.js';
type SingleAgentCallback = (context: CallbackContext) => Promise<Content | undefined> | (Content | undefined);
type BeforeAgentCallback = SingleAgentCallback | SingleAgentCallback[];
type AfterAgentCallback = SingleAgentCallback | SingleAgentCallback[];
/**
 * The config of a base agent.
 */
export interface BaseAgentConfig {
    name: string;
    description?: string;
    parentAgent?: BaseAgent;
    subAgents?: BaseAgent[];
    beforeAgentCallback?: BeforeAgentCallback;
    afterAgentCallback?: AfterAgentCallback;
}
/**
 * A unique symbol to identify ADK agent classes.
 * Defined once and shared by all BaseAgent instances.
 */
declare const BASE_AGENT_SIGNATURE_SYMBOL: unique symbol;
/**
 * Type guard to check if an object is an instance of BaseAgent.
 * @param obj The object to check.
 * @returns True if the object is an instance of BaseAgent, false otherwise.
 */
export declare function isBaseAgent(obj: unknown): obj is BaseAgent;
/**
 * Base class for all agents in Agent Development Kit.
 */
export declare abstract class BaseAgent {
    /**
     * A unique symbol to identify ADK agent classes.
     */
    readonly [BASE_AGENT_SIGNATURE_SYMBOL] = true;
    /**
     * The agent's name.
     * Agent name must be a JS identifier and unique within the agent tree.
     * Agent name cannot be "user", since it's reserved for end-user's input.
     */
    readonly name: string;
    /**
     * Description about the agent's capability.
     *
     * The model uses this to determine whether to delegate control to the agent.
     * One-line description is enough and preferred.
     */
    readonly description?: string;
    /**
     * Root agent of this agent.
     */
    readonly rootAgent: BaseAgent;
    /**
     * The parent agent of this agent.
     *
     * Note that an agent can ONLY be added as sub-agent once.
     *
     * If you want to add one agent twice as sub-agent, consider to create two
     * agent instances with identical config, but with different name and add them
     * to the agent tree.
     *
     * The parent agent is the agent that created this agent.
     */
    parentAgent?: BaseAgent;
    /**
     * The sub-agents of this agent.
     */
    readonly subAgents: BaseAgent[];
    /**
     * Callback or list of callbacks to be invoked before the agent run.
     *
     * When a list of callbacks is provided, the callbacks will be called in the
     * order they are listed until a callback does not return undefined.
     *
     * @param callbackContext: MUST be named 'callbackContext' (enforced).
     *
     * @return Content: The content to return to the user. When the content is
     *     present, the agent run will be skipped and the provided content will be
     *     returned to user.
     */
    readonly beforeAgentCallback: SingleAgentCallback[];
    /**
     * Callback or list of callbacks to be invoked after the agent run.
     *
     * When a list of callbacks is provided, the callbacks will be called in the
     * order they are listed until a callback does not return undefined.
     *
     * @param callbackContext: MUST be named 'callbackContext' (enforced).
     *
     * @return Content: The content to return to the user. When the content is
     *     present, the provided content will be used as agent response and
     *     appended to event history as agent response.
     */
    readonly afterAgentCallback: SingleAgentCallback[];
    constructor(config: BaseAgentConfig);
    /**
     * Entry method to run an agent via text-based conversation.
     *
     * @param parentContext The invocation context of the parent agent.
     * @yields The events generated by the agent.
     * @returns An AsyncGenerator that yields the events generated by the agent.
     */
    runAsync(parentContext: InvocationContext): AsyncGenerator<Event, void, void>;
    /**
     * Entry method to run an agent via video/audio-based conversation.
     *
     * @param parentContext The invocation context of the parent agent.
     * @yields The events generated by the agent.
     * @returns An AsyncGenerator that yields the events generated by the agent.
     */
    runLive(parentContext: InvocationContext): AsyncGenerator<Event, void, void>;
    /**
     * Core logic to run this agent via text-based conversation.
     *
     * @param context The invocation context of the agent.
     * @yields The events generated by the agent.
     * @returns An AsyncGenerator that yields the events generated by the agent.
     */
    protected abstract runAsyncImpl(context: InvocationContext): AsyncGenerator<Event, void, void>;
    /**
     * Core logic to run this agent via video/audio-based conversation.
     *
     * @param context The invocation context of the agent.
     * @yields The events generated by the agent.
     * @returns An AsyncGenerator that yields the events generated by the agent.
     */
    protected abstract runLiveImpl(context: InvocationContext): AsyncGenerator<Event, void, void>;
    /**
     * Finds the agent with the given name in this agent and its descendants.
     *
     * @param name The name of the agent to find.
     * @return The agent with the given name, or undefined if not found.
     */
    findAgent(name: string): BaseAgent | undefined;
    /**
     * Finds the agent with the given name in this agent's descendants.
     *
     * @param name The name of the agent to find.
     * @return The agent with the given name, or undefined if not found.
     */
    findSubAgent(name: string): BaseAgent | undefined;
    /**
     * Creates an invocation context for this agent.
     *
     * @param parentContext The invocation context of the parent agent.
     * @return The invocation context for this agent.
     */
    protected createInvocationContext(parentContext: InvocationContext): InvocationContext;
    /**
     * Runs the before agent callback if it exists.
     *
     * @param invocationContext The invocation context of the agent.
     * @return The event to return to the user, or undefined if no event is
     *     generated.
     */
    protected handleBeforeAgentCallback(invocationContext: InvocationContext): Promise<Event | undefined>;
    /**
     * Runs the after agent callback if it exists.
     *
     * @param invocationContext The invocation context of the agent.
     * @return The event to return to the user, or undefined if no event is
     *     generated.
     */
    protected handleAfterAgentCallback(invocationContext: InvocationContext): Promise<Event | undefined>;
    private setParentAgentForSubAgents;
}
/**
 * Gets the canonical callback from the given callback.
 *
 * @param callbacks The callback or list of callbacks to get the canonical
 *     callback from.
 * @return The canonical callback.
 */
export declare function getCannonicalCallback<T>(callbacks?: T | T[]): T[];
export {};
